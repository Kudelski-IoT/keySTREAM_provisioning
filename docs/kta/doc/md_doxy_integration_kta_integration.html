<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>keySTREAM Trusted Agent: MPLAB® Harmony KTA_LIB Configurations and Application.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="kudelski.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LOGO_IOT_IOTHINGS.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">keySTREAM Trusted Agent
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_doxy_integration_kta_integration.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MPLAB® Harmony KTA_LIB Configurations and Application. </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>MPLAB® Harmony is a software development framework consisting of compatible and interoperable modules that include peripheral libraries (PLIBs), drivers, system services, middleware, and third-party libraries. The MPLAB Harmony Configurator (MHC) is a GUI-based tool that provides an easy way to enable and configure various MPLAB Harmony modules. The MHC is a plug-in to the MPLAB X Integrated Development Environment (IDE). More Details about MPLAB Harmony v3 can be found at <a href="https://www.microchip.com/harmony">MPLAB Harmony</a></p>
<h1><a class="anchor" id="autotoc_md23"></a>
Integration Steps:</h1>
<p>1) Open MPLAB X IDE version 6.20 or greater.Click on Content Manager as shown below.</p>
<div class="image">
<img src="CM_click.png" alt=""/>
</div>
   <p>2) Once Content Manager is loaded, look for Harmony 3 - Kudelski keySTREAM Solutions.</p>
<div class="image">
<img src="navigate_kudelski_ks_solution.png" alt=""/>
</div>
   <p>3) Expand Harmony 3 - Kudelski keySTREAM Solutions and select version as shown below.</p>
<div class="image">
<img src="kta_version_select.png" alt=""/>
</div>
   <p>4) Click on Apply as shown below.</p>
<div class="image">
<img src="kta_version_apply.png" alt=""/>
</div>
   <p>5) The library and its dependencies will be downloaded as shown below.</p>
<div class="image">
<img src="download_progress.png" alt=""/>
</div>
   <p>6) Once all the dependency downloading is completed, close the Content Manager window.</p>
<p>7) Then click on new project and select Microchip Embedded -&gt; Application Projects as shown in figure and click Next.</p>
<div class="image">
<img src="new-Proj_001.png" alt=""/>
</div>
   <p>8) Select the device from dropdown as shown in figure and click Next.</p>
<div class="image">
<img src="new-Projdev_selection.png" alt=""/>
</div>
   <p>9) Select the compiler and click Next as shown below.</p>
<div class="image">
<img src="new-Proj_complr_selection.png" alt=""/>
</div>
   <p>10) Enter Project Name and Project Location as shown in figure and click on Finish.</p>
<div class="image">
<img src="new-Proj_folder_selection.png" alt=""/>
</div>
   <p>11) Wait until project loading completes.</p>
<p>12) To add and configure peripheral libraries for the MCU, follow these steps, as shown in figure below.</p><ul>
<li>Go to the "Resources Management" tab located on the left side.</li>
<li>Navigate to "Device Resources."</li>
<li>Expand the "Libraries" section.</li>
<li>Look for "Third party Libraries".</li>
</ul>
<div class="image">
<img src="configure_peripheral.png" alt=""/>
</div>
   <p>13) Expand the "Third-Party Libraries" section, then click on the KTA_LIB to add and configure the desired library KTA_LIB, as shown in figure below.</p>
<div class="image">
<img src="Third_party.png" alt=""/>
</div>
   <p>14) The KTA_LIB depends on two components: STDIO and CryptoAuthLib. Please select "Yes" to load and activate these components. as shown in figure below.</p>
<div class="image">
<img src="Components_activation.png" alt=""/>
</div>
   <div class="image">
<img src="Components_activation_1.png" alt=""/>
</div>
   <p>15) Click on the KTA_LIB Module on the Project graph to access the configuration options, if wish to enable log, please configure the appropriate configuration options accordingly, as shown in figure below..</p>
<div class="image">
<img src="Enable_log.png" alt=""/>
</div>
   <p>16) Provide the Device Public UID in the configuration option. as shown in figure below.</p>
<div class="image">
<img src="Device_Profile_Uid.png" alt=""/>
</div>
   <p>17) Please Resolve the dependency of STDIO by Right-clicking the UART within the STDIO Module in Project graph and navigate to "Satisfiers," and select "SERCOM3 (sercom3).", as shown in figure below.</p>
<div class="image">
<img src="Uart.png" alt=""/>
</div>
   <p>18) You can notice that STDIO dependency is resolved, as shown in figure below.</p>
<div class="image">
<img src="Uart_sercom.png" alt=""/>
</div>
   <p>19) Click on the "Resource Management" tab, then Navigate to Project Resources. Finally, click on "Generate" to successfully load the project. as shown in figure below.</p>
<div class="image">
<img src="generate.png" alt=""/>
</div>
   <p>20) Once all the above steps are completed, click on <b>Generate Code</b> to include KTA_LIB in your project.</p>
<p>21) A lightweight example application is available in the <b>apps/keystream_late_provisioning_app</b> directory of our Git repository. This example demonstrates an updated <code>main()</code> function and the use of <code>PORT_Initialize()</code> within the <code>SYS_Initialize()</code> API to enable console prints. Please refer to this application and adapt these changes in your generated project.</p>
<p>22) Enable the following preprocessor macros as per your project requirements from the file path below:</p>
<ul>
<li><b>File Path:</b> <br  />
 Header Files\config\default\library\kta_lib\SOURCE\include\ktaConfig.h</li>
<li><b>NETWORK_STACK_AVAILABLE</b> <br  />
 Enable this macro once the network stack is implemented.</li>
<li><b>FOTA_ENABLE</b> <br  />
 Enable this macro once the FOTA agent is fully implemented.</li>
</ul>
<p><b>Mandatory API Implementation for FOTA Services</b></p>
<p>To enable FOTA services, you must implement the following APIs in the specified source file:</p>
<ul>
<li><b>File Path:</b> <br  />
 Source Files\config\default\kta_lib\fotaservice\fotaplatform.c</li>
<li><b>Required APIs:</b><ul>
<li><code><a class="el" href="fotaplatform_8c.html#a611b15a0c977443a16322a66a23535c9" title="Fota Platform.">fotaPlatformGetComponents()</a></code></li>
<li><code>fotaStartInstallation()</code></li>
</ul>
</li>
<li><b>File Path:</b> <code>SOURCE\salapi\k_sal_fotastorage.c</code></li>
</ul>
<p><b>APIs to Implement:</b></p><ul>
<li><code>salFotaStorageWrite()</code></li>
<li><code>salFotaStorageRead()</code></li>
</ul>
<p><b>Header File:</b> <br  />
 <code>SOURCE\salapi\include\k_sal_fotastorage.h</code></p>
<p>see <a href="md_doxy_integration_kta_fota_integration.html"><code>FOTA INTEGRATION</code></a></p>
<h1><a class="anchor" id="autotoc_md24"></a>
FOTA API</h1>
<p>23) Preconfigured example applications are also provided in the <b>PreConfigured-Examples</b> directory of our Git repository. These examples include an integrated communication stack and other supported features, as described below.</p>
<p><b>NOTE:</b> The Getting Started Guide for the preconfigured examples is available in the <b>PreConfigured-Examples</b> directory of our Git repository.</p>
<ul>
<li><b>D21_X:</b> This preconfigured example includes both communication and application layers. The D21 application uses a Wi-Fi communication stack with the WINC1500 Wi-Fi module. Users must provide the Wi-Fi SSID, password, fleet profile UID obtained from keySTREAM, and the AWS endpoint.</li>
<li><b>SAME54_X:</b> This preconfigured example includes both communication and application layers. The SAME54 application uses an Ethernet communication stack. Users must provide the fleet profile UID obtained from keySTREAM, the AWS endpoint, and the AWS Thing Name.</li>
<li><b>SG41_X:</b> This preconfigured example includes both communication and application layers. The SG41 application uses a Wi-Fi communication stack with the WINCS02 Wi-Fi module. Users must provide the Wi-Fi SSID, password, and fleet profile UID obtained from keySTREAM.</li>
</ul>
<h1><a class="anchor" id="autotoc_md25"></a>
keySTREAM Trusted Agent Release Notes</h1>
<p>see <a href="md_doxy_integration_release_notes.html"><code>Release Notes</code></a></p>
<h1><a class="anchor" id="autotoc_md26"></a>
keySTREAM Trusted Agent License</h1>
<p>see <a href="md_doxy_integration_license.html"><code>LICENSE</code></a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer"><b></b>
    Copyright &copy; 2023-2024 Nagravision S&agrave;rl.
	- Generated by <a href="https://www.doxygen.org/index.html" target="_new">doxygen</a> 1.8.17</li>
  </ul>
</div>
</body>
</html>